package guess.the.color.project.api;

import javax.servlet.http.HttpSession;

import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.bind.annotation.RestController;

import guess.the.color.project.model.Complexity;
import guess.the.color.project.model.Game;

@RestController
@RequestMapping("/api")
public class GuessTheColorAPI {
	
	@PostMapping("/games")
	public ResponseEntity<Game> createGame(@RequestBody String complexity, HttpSession session) {

		Game game = new Game();
		
		if(session.getAttribute("bestScore") != null){
			game.setBestScore(Integer.parseInt(session.getAttribute("bestScore").toString()));
		}
		else {
			session.setAttribute("bestScore", 0);
		}		
		
		switch (complexity) {
		case "Easy":
			game.setComplexity(Complexity.EASY);
			break;
		case "Medium":
			game.setComplexity(Complexity.MEDIUM);
			break;
		case "Hard":
			game.setComplexity(Complexity.HARD);
			break;
		default:
			break;
		}
		return ResponseEntity.ok(game);
	}
	
	@GetMapping("/games/{gameId}")
	public Game getGame(@PathVariable Long gameId) {
		return null;
	}

}
